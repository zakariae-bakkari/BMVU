<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="../assets/bootstrap-5.0.2-dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="../../../node_modules/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="../assets/assets/images/icon.png" />
    <link rel="stylesheet" href="../assets/assets/css/style.css" />
    <title>BMVU Simulation - ONCF AGDAL</title>
  </head>
  <style>
    :root {
      --bs-blue: rgb(56, 118, 191);
      --bs-dark-blue: rgb(25, 38, 85);
      --bs-indigo: #6610f2;
      --bs-purple: #6f42c1;
      --bs-pink: #d63384;
      --bs-red: #dc3545;
      --bs-orange: rgb(255, 169, 58);
      --bs-yellow: #ffc107;
      --bs-green: rgb(129, 162, 99);
      --bs-teal: #20c997;
      --bs-cyan: #0dcaf0;
      --bs-white: #fff;
      --bs-gray: #6c757d;
      --bs-gray-dark: #343a40;
      --bs-primary: #387be0;
      --bs-secondary: #6c757d;
      --bs-success: #198754;
      --bs-info: #0dcaf0;
      --bs-warning: #ffc107;
      --bs-danger: #dc3545;
      --bs-light: #f8f9fa;
      --bs-dark: #212529;
      --bs-first: rgb(172, 187, 254);
    }
    .download_ouvrire {
      padding: 20px;
      border-radius: 12px;
      background-color: rgb(255, 255, 255);
      z-index: 3200;
      width: 50%;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .button {
      background-color: var(--bs-success);
      width: 9em;
      height: 2em;
      margin: 10px;
      line-height: 2em;
      border: 2px solid var(--bs-success);
      z-index: 1;
      font-size: 18px;
      color: var(--color);
    }
    .button.ouvrire_img {
      background-color: var(--bs-yellow);
      border: 2px solid var(--bs-yellow);
      color: var(--color);
    }

    .button:hover {
      color: var(--bs-dark);
    }
    .button:active:before {
      background: #d0d0d0;
      transition: background 0s;
    }
    .download_ouvrire-close {
      position: fixed;
      top: 0;
      right: 0;
      padding: 5px;
      background-color: #6c757d;
      border-radius: 0 12px 0 2px;
    }

    .bi-x-circle{
      cursor: pointer;
      position: absolute;
      right: -3px;
      top: 3px;
    }
  </style>
  <body>
    <div class="window">
      <!-- Preloader -->
      <div class="preloader_container">
        <div class="loader">
          <div class="loader-circle"></div>
          <div class="loader-circle"></div>
          <div class="loader-circle"></div>
        </div>
      </div>
      <!-- section -->
      <section class="hero-section" id="hero-section">

        <!-- !-------------------------------alerts---------------------- -->
        <div
          class="alert alert-warning alert-dismissible fade show message_warning_div fixed top-5"
          role="alert"
          style="display: none; z-index: 9999;"
        >
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
          <strong><i class="fa-solid fa-triangle-exclamation" style="color: #ffc800"></i></strong>
          <span id="message_warning">Message d'avertissement</span>
        </div>

        <div
          class="alert alert-success alert-dismissible fade show message_information_div fixed top-5"
          role="alert"
          style="display: none; z-index: 9999;"
        >
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
          <strong><i class="fa-solid fa-circle-check pe-2" style="color: #199400"></i>Parfait !</strong>
          <span id="message_information">Message d'information</span>
        </div>

        <!-- *------------------------------header----------------------- -->
        <div class="d-flex justify-content-between navbar_bar p-3">
          <div class="d-flex gap-3">
            <img
              src="../assets/assets/images/oncf_logo.png"
              width="80"
              alt="ONCF Logo"
              class="logo"
            />
            <img
              src="../assets/assets/images/est2.png"
              width="80"
              alt="EST Logo"
              class="logo"
            />
          </div>

          <div class="d-flex justify-content-center align-items-center">
            <h4 class="text-white m-0">BMVU - Simulation Interactive</h4>
          </div>

          <div class="d-flex justify-content-center align-items-center gap-3">
            <span class="text-white" id="date"></span>
            <i class="bi bi-keyboard-fill text-white fs-4 cursor-pointer"></i>
          </div>
        </div>

        <!-- Shortcuts Panel -->
        <div class="shortcuts-box dropzone-box row" style="display: none;">
          <h2>Raccourcis Clavier</h2>
          <i class="bi bi-x-circle"></i>
          <div class="col-6">
            <h5>Station A</h5>
            <ul>
              <li><kbd>Ctrl + T</kbd> Test</li>
              <li><kbd>Ctrl + S</kbd> Sémaphore</li>
              <li><kbd>Ctrl + R</kbd> Rédition</li>
              <li><kbd>Ctrl + A</kbd> Annonce</li>
              <li><kbd>Ctrl + F</kbd> Sonnerie</li>
              <li><kbd>Ctrl + B</kbd> Blocage</li>
              <li><kbd>B</kbd> Pédale Blocage</li>
              <li><kbd>C</kbd> Pédale Passage</li>
            </ul>
          </div>
          <div class="col-6">
            <h5>Station B</h5>
            <ul>
              <li><kbd>Alt + T</kbd> Test</li>
              <li><kbd>Alt + S</kbd> Sémaphore</li>
              <li><kbd>Alt + R</kbd> Rédition</li>
              <li><kbd>Alt + A</kbd> Annonce</li>
              <li><kbd>Alt + F</kbd> Sonnerie</li>
              <li><kbd>Alt + B</kbd> Blocage</li>
              <li><kbd>X</kbd> Pédale Blocage</li>
              <li><kbd>V</kbd> Pédale Passage</li>
            </ul>
          </div>
        </div>

        <!-- Main BMVU Interface -->
        <div class="container-fluid hero row height_100vh">
          <!-- *-------------left block----------------- -->
          <div class="col-3 block-cote block-coteA h-100 d-flex flex-column">
            <div class="row flex-fill">
              <div class="p-2 col-12 text-light d-flex justify-content-center">
                <span>Block cote</span>
              </div>
              <div
                class="p-2 col-12 text-light d-flex justify-content-center fs-2 fw-bold"
              >
                A
              </div>
            </div>
            <div class="row text-light flex-fill">
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_blockage"
                id="div_blockageA " data-bs-toggle="tooltip" title="Ctrl + b"
              >
                <span>blockage</span>
                <div class="  ">
                  <a class="btn btn-block" id="btn-blockA">
                    <div class="btn-support">
                      <i class="bi bi-arrow-up"></i>
                    </div>
                  </a>
                </div>
              </div>
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_annonce"
                id="div_annonceA" data-bs-toggle="tooltip"
                title="Ctrl + a"
              >
                <span>Annonce</span>
                <a class="a btn bm_btn btn-annonce" id="btn-annonceA"></a>
                <span>
                  voie
                  <button
                    class="btn-led led-annonce"
                    id="led-annonceA"
                  ></button>
                  libre
                </span>
                <button
                  class="btn-led led-annonce"
                  id="led_annonceA_fullscreen"
                ></button>
              </div>
            </div>
            <div class="row text-light flex-fill">
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_redition"
                id="div_reditionA" data-bs-toggle="tooltip" title="Ctrl + r"
              >
                <span>redition</span>
                <a class="a btn bm_btn btn-redition" id="btn-reditionA"></a>
              </div>
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_test"
                id="div_testA" data-bs-toggle="tooltip" title="Ctrl + t"
              >
                <span>test</span>
                <a class="a btn bm_btn btn-test" id="btn-testA"></a>
              </div>
            </div>
            <div class="row text-light flex-fill">
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center relative div_sonnerie"
                id="div_sonnerieA" data-bs-toggle="tooltip" title="Ctrl + f"
              >
                <span>SONNERIE</span>
                <a class="a btn bm_btn btn-sonnerie" id="btn-sonnerieA"></a>
                <div class="icon_sonnerieA" id="icon_sonnerieA">
                  <i class="fa-solid fa-bell fa-shake"></i>
                </div>
              </div>
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_semaphore"
                id="div_semaphoreA" data-bs-toggle="tooltip" title="Ctrl + s"
              >
                <span>SEMAPHORE</span>
                <span>
                  <button
                    class="btn-led led-semaphore"
                    id="led-semaphoreA"
                  ></button>
                </span>
                <button
                  class="btn-led led-semaphore mb-2"
                  id="led_semaphoreA_fullscreen"
                ></button>
                <div>
                  <a class="btn btn-semaphore" id="btn-semaphoreA">
                    <div class="btn-support">
                      <i class="bi bi-arrow-up"></i>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- !----------------center screen---------------- -->
          <div class="col-6 screen h-100">
            <div class="diagram">
              <div class="gare">
                <div>GARE A</div>
                <div>GARE B</div>
              </div>
              <div class="line_top_left"></div>
              <div class="line_rotate_left"></div>
              <div class="line_top_right"></div>
              <div class="line_rotate_right"></div>
              <div class="line"></div>
              <div class="vertical_line"></div>
              <button class="block b1" id="pedal1_block" data-bs-toggle="tooltip" title="b">B</button>
              <button class="block p1-1" id="pedal1" data-bs-toggle="tooltip" title="c">pA</button>
              <button class="block p1-2" id="pedal2" data-bs-toggle="tooltip" title="v">pB</button>
              <button class="block b2" id="pedal2_block" data-bs-toggle="tooltip" title="x">B</button>
              <div class="train train-left" id="train">
                <img src="../assets/assets/images/train1.png" alt="train" />
              </div>
              <div class="train train-right" id="train-1-b">
                <img src="../assets/assets/images/train1.png" alt="train" />
              </div>

              <div class="signal signal-left-1">
                <img src="../assets/assets/images/feu_rouge.png" alt="" id="signal-left-1" />
              </div>


              <div class="signal signal-right-2">
                <img src="../assets/assets/images/feu_rouge.png" alt="" id="signal-right-2" />
              </div>

              <div class="absolute bottom-5 left-50">
                <a  data-bs-toggle="tooltip" title="r" href="" id="re" class="btn btn-2 rounded-50">
                  <i class="bi bi-repeat"></i>
                </a>
                <button data-bs-toggle="tooltip" title="f" id="btn_fullscreen" class="btn btn-1 rounded-50">
                  <i class="bi bi-arrows-angle-expand"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- *-----right block----- -->
          <div class="col-3 block-cote block-coteB h-100 d-flex flex-column">
            <div class="row flex-fill">
              <div class="p-2 col-12 text-light d-flex justify-content-center">
                <span>Block cote</span>
              </div>
              <div
                class="p-2 col-12 text-light d-flex justify-content-center fs-2 fw-bold"
              >
                B
              </div>
            </div>
            <div class="row text-light flex-fill">
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_blockage"
                id="div_blockageB" data-bs-toggle="tooltip" title="Alt + b"
              >
                <span>blockage</span>
                <div class="  ">
                  <a class="btn btn-block" id="btn-blockB">
                    <div class="btn-support">
                      <i class="bi bi-arrow-up"></i>
                    </div>
                  </a>
                </div>
              </div>
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_annonce"
                id="div_annonceB" data-bs-toggle="tooltip" title="Alt + a"
              >
                <span>Annonce</span>
                <a class="a btn bm_btn btn-annonce" id="btn-annonceB"></a>
                <span>
                  voie
                  <button
                    class="btn-led led-annonce"
                    id="led-annonceB"
                  ></button>
                  libre
                </span>
                <button
                  class="btn-led led-annonce"
                  id="led_annonceB_fullscreen"
                ></button>
              </div>
            </div>
            <div class="row text-light flex-fill">
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_redition"
                id="div_reditionB" data-bs-toggle="tooltip" title="Alt + r"
              >
                <span>redition</span>
                <a class="a btn bm_btn btn-redition" id="btn-reditionB"></a>
              </div>
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_test"
                id="div_testB" data-bs-toggle="tooltip" title="Alt + t"
              >
                <span>test</span>
                <a class="a btn bm_btn btn-test" id="btn-testB"></a>
              </div>
            </div>
            <div class="row text-light flex-fill">
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center relative div_sonnerie"
                id="div_sonnerieB" data-bs-toggle="tooltip" title="Alt + f"
              >
                <span>SONNERIE</span>
                <a class="a btn bm_btn btn-sonnerie" id="btn-sonnerieB"></a>
                <div class="icon_sonnerieB" id="icon_sonnerieB">
                  <i class="fa-solid fa-bell fa-shake"></i>
                </div>
              </div>
              <div
                class="border p-2 col-6 d-flex justify-content-center flex-column align-items-center div_semaphore"
                id="div_semaphoreB" data-bs-toggle="tooltip" title="Alt + s"
              >
                <span>SEMAPHORE</span>
                <span>
                  <button
                    class="btn-led led-semaphore"
                    id="led-semaphoreB"
                  ></button>
                </span>
                <button
                  class="btn-led led-semaphore mb-2"
                  id="led_semaphoreB_fullscreen"
                ></button>
                <div>
                  <a class="btn btn-semaphore" id="btn-semaphoreB">
                    <div class="btn-support">
                      <i class="bi bi-arrow-up"></i>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

      </section>

  
      <div class="image-container" id="image-container">
        <button
          class="btn btn-close btn-close-image-container"
          id="btn-close-image-container"
        ></button>
        <img src="./assets/images/bg-1.jpg" alt="" id="image-content-fullscreen" />
      </div>
      <!-- 
  bootstrap linl
 -->
      <script src="../assets/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
      <script src="../assets/assets/js/script.js"></script>
      <!-- 
  fontawsome link
 -->
      <script
        src="https://kit.fontawesome.com/b3a4e89b33.js"
        crossorigin="anonymous"
      ></script>
      <script>

        const { shell } = require("electron");

        function openExternal(url) {
          shell.openExternal(url);
        }
      </script>
      <!-- Preloader Removal Script -->
      <script>
        // Remove preloader when page loads - 4 seconds
        window.addEventListener('load', function() {
          const preloader = document.querySelector('.preloader_container');
          if (preloader) {
            setTimeout(() => {
              preloader.style.display = 'none';
            }, 4000); // Hide after 4 seconds
          }
        });

        // Also try DOMContentLoaded as fallback - 4 seconds
        document.addEventListener('DOMContentLoaded', function() {
          const preloader = document.querySelector('.preloader_container');
          if (preloader) {
            setTimeout(() => {
              preloader.style.display = 'none';
            }, 4000); // Hide after 4 seconds
          }

          // Update date display
          const dateElement = document.getElementById('date');
          if (dateElement) {
            const now = new Date();
            dateElement.textContent = now.toLocaleDateString('fr-FR', {
              weekday: 'long',
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            });
          }

          // Keyboard shortcuts handler
          const shortcutsIcon = document.querySelector('.bi-keyboard-fill');
          const shortcutsBox = document.querySelector('.shortcuts-box');
          const closeShortcuts = document.querySelector('.bi-x-circle');

          if (shortcutsIcon && shortcutsBox) {
            shortcutsIcon.addEventListener('click', () => {
              shortcutsBox.style.display = shortcutsBox.style.display === 'none' ? 'flex' : 'none';
            });
          }

          if (closeShortcuts && shortcutsBox) {
            closeShortcuts.addEventListener('click', () => {
              shortcutsBox.style.display = 'none';
            });
          }
        });

        // Ensure preloader is removed after exactly 4 seconds (failsafe)
        setTimeout(() => {
          const preloader = document.querySelector('.preloader_container');
          if (preloader) {
            preloader.style.display = 'none';
          }
        }, 4000);
      </script>
    </div>
  </body>
</html>
